<html>
<head>
<link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>

<div class="box">

<h3>Cadre Dashboard</h3>

<button onclick="markIn()">MARK IN</button>
<button onclick="markOut()">MARK OUT</button>

<button onclick="location='leave.html'">Apply Leave</button>

<p id="msg"></p>

</div>

<script>

var api="https://script.google.com/macros/s/AKfycbynQe3ZPuhKXdREyOgFR_lZxPA_-GmzVL3zp2IWvubo3TLH5W9zTEQczl3dhTzro8WRIg/exec";

function markIn(){

navigator.geolocation.getCurrentPosition(p=>{

fetch(api,{
method:"POST",
body:new URLSearchParams({
action:"markIn",
userid:localStorage.uid,
lat:p.coords.latitude,
lon:p.coords.longitude})
})
.then(r=>r.text())
.then(d=>msg.innerHTML=d);

});

}

function markOut(){

navigator.geolocation.getCurrentPosition(p=>{

fetch(api,{
method:"POST",
body:new URLSearchParams({
action:"markOut",
userid:localStorage.uid,
lat:p.coords.latitude,
lon:p.coords.longitude})
})
.then(r=>r.text())
.then(d=>msg.innerHTML=d);

});

}

</script>

  <script>

$(document).ready(function(){

  $(".box").addClass("fade");

  $("button").click(function(){
     $(this).css("opacity","0.8");
     setTimeout(()=>$(this).css("opacity","1"),200);
  });

  $("input, textarea, select").focus(function(){
     $(this).css("border","2px solid #2b7cff");
  });

  $("input, textarea, select").blur(function(){
     $(this).css("border","1px solid #ccc");
  });

});


function showMessage(msg,type){

  var css = type=="success" ? "alert success" : "alert error";

  $("#msg").html("<div class='"+css+"'>"+msg+"</div>");

  setTimeout(()=>$("#msg").html(""),3000);
}


function showLoader(){
  $(".loader").show();
}

function hideLoader(){
  $(".loader").hide();
}

</script>

</body>
</html>








